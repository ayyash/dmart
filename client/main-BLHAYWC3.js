import{a as Mt,b as j,c as v}from"./chunk-LESIRYZF.js";import{a as N,b as H,d as Lt}from"./chunk-JGFSGBRL.js";import{A as m,Ab as T,B as nt,Ba as s,C as p,Da as A,Ea as w,H as it,Ha as ft,I as at,J as pt,Ja as ht,M as st,O as lt,Pa as gt,R as J,Ra as F,S as h,Sa as O,Va as P,W as R,Wa as vt,Xa as yt,Y as x,ab as Ct,bb as bt,cb as It,ea as i,eb as K,fa as n,fb as Q,g as G,ga as u,gb as St,hb as g,i as S,ib as L,j as Y,ja as mt,jb as D,ka as ct,kb as E,l as q,la as ut,lb as Rt,m as tt,mb as xt,nb as At,o as et,ob as wt,pb as Ft,q as ot,qb as Ot,r as rt,rb as Pt,sb as M,ta as d,ua as dt,w as a,xb as Dt,yb as Et,z as b}from"./chunk-QUNHBVRW.js";var c=class t extends Lt{constructor(){super("NONE"),_seqlog("loader srvice construct"),this.SetState({show:!1,source:null,url:null}),this.stateItem$=this.stateItem$.pipe(ot())}show(o){this.UpdateState({show:!0,source:o})}hide(o){this.UpdateState({show:!1,source:o})}emitUrl(o){this.UpdateState({url:o})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"})};function Bt(t,o){t&1&&(i(0,"div",1),u(1,"div",2)(2,"div",3)(3,"div",4),n())}var $=class t{constructor(o){this.loaderService=o}show$;ngOnInit(){this.show$=this.loaderService.stateItem$.pipe(S(o=>o?o.show:!1))}static \u0275fac=function(e){return new(e||t)(h(c))};static \u0275cmp=p({type:t,selectors:[["http-loader"]],standalone:!0,features:[s],decls:2,vars:3,consts:[["class","httploader",4,"ngIf"],[1,"httploader"],[1,"line"],[1,"subline","inc"],[1,"subline","dec"]],template:function(e,r){e&1&&(R(0,Bt,4,0,"div",0),A(1,"async")),e&2&&x("ngIf",w(1,1,r.show$))},dependencies:[P,F,O],styles:[`.httploader{height:4px;position:fixed;top:0;left:0;z-index:5101;overflow:hidden;right:0}.line{position:absolute;opacity:.4;background:#0c00b480;width:100%;height:5px}.subline{position:absolute;background:#0c00b4;height:5px}.inc{animation:increase 5s infinite}.dec{animation:decrease 5s 1s infinite}@keyframes increase{0%{left:-5%;width:5%}to{left:130%;width:100%}}@keyframes decrease{0%{left:-80%;width:80%}to{left:110%;width:10%}}
`],encapsulation:2})};var k=class t{constructor(){_seqlog("app component")}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=p({type:t,selectors:[["app-root"]],standalone:!0,features:[s],decls:2,vars:0,template:function(e,r){e&1&&u(0,"http-loader")(1,"router-outlet")},dependencies:[g,$],encapsulation:2})};var Wt=t=>{let o=m(v),e=m(E);return o.redirectUrl=t,o.stateItem$.pipe(S(r=>r?!0:(e.navigateByUrl(Et.Auth.loginRoute),!1)))},X=(t,o)=>Wt(o.url);var _=class t{constructor(o){this.loaderService=o}ngOnInit(){_debug(this.loaderService.currentItem.url,"404ed url")}static \u0275fac=function(e){return new(e||t)(h(c))};static \u0275cmp=p({type:t,selectors:[["ng-component"]],standalone:!0,features:[s],decls:2,vars:0,consts:[[1,"singlepage","container"]],template:function(e,r){e&1&&(i(0,"div",0),d(1,` Page not found.
`),n())},encapsulation:2,changeDetection:0})};var U=class t{constructor(){}ngOnInit(){}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=p({type:t,selectors:[["ng-component"]],standalone:!0,features:[s],decls:2,vars:0,consts:[[1,"container","tightpage","box","box--content"]],template:function(e,r){e&1&&(i(0,"div",0),d(1,` Oops! We could not perform the required action for some reason. We are looking into it right now. -- add few other things here
`),n())},encapsulation:2,changeDetection:0})};function zt(t,o){if(t&1){let e=mt();i(0,"li",5)(1,"a",6),d(2),n(),i(3,"a",7),ct("click",function(){it(e);let f=ut();return at(f.logout())}),d(4,"(Logout)"),n()()}if(t&2){let e=o.ngIf;J(2),dt(e.payload.username)}}var y=class t{constructor(o){this.authState=o}profile$;ngOnInit(){this.profile$=this.authState.stateItem$}logout(){this.authState.Logout(!0)}static \u0275fac=function(e){return new(e||t)(h(v))};static \u0275cmp=p({type:t,selectors:[["ng-component"]],standalone:!0,features:[s],decls:12,vars:3,consts:[[1,"header"],[1,"boxed","row"],["routerLink","/"],["routerLink","/spaces"],["class","lauto",4,"ngIf"],[1,"lauto"],["routerLink","/profile"],[1,"smaller",3,"click"]],template:function(e,r){e&1&&(i(0,"header",0)(1,"nav")(2,"ul",1)(3,"li")(4,"a",2),d(5,"Home"),n()(),i(6,"li")(7,"a",3),d(8,"Spaces"),n()(),R(9,zt,5,1,"li",4),A(10,"async"),n()()(),u(11,"router-outlet")),e&2&&(J(9),x("ngIf",w(10,1,r.profile$)))},dependencies:[M,g,Rt,P,F,O],encapsulation:2})};var C=class t{constructor(){}ngOnInit(){}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=p({type:t,selectors:[["ng-component"]],standalone:!0,features:[s],decls:3,vars:0,consts:[[1,"header"]],template:function(e,r){e&1&&(i(0,"header",0),u(1,"nav"),n(),u(2,"router-outlet"))},dependencies:[M,g],encapsulation:2})};var B=class t{constructor(o,e){this._platformId=o;this._doc=e;this.doc=this._doc,this.isBrowser=this._platformId?vt(this._platformId):typeof document=="object"&&!!document}isBrowser;doc;static \u0275fac=function(e){return new(e||t)(b(lt),b(gt))};static \u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"})};var W=class t{constructor(o){this._platform=o}preload(o,e){return this._platform.isBrowser?o.data&&o.data.preload?o.data.delay?q(5e3).pipe(Y(()=>e())):e():G(null):G(null)}static \u0275fac=function(e){return new(e||t)(b(B))};static \u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"})};var V=class t extends D{shouldDetach(){return!1}store(){}shouldAttach(){return!1}retrieve(){return null}shouldReuseRoute(o,e){if(e.routeConfig===o.routeConfig&&e.data&&e.data.reuse==="never"){let r=!0;return o.data.params.forEach(f=>{r=r&&o.paramMap.get(f)===e.paramMap.get(f)}),r}return e.routeConfig===o.routeConfig}static \u0275fac=(()=>{let o;return function(r){return(o||(o=pt(t)))(r||t)}})();static \u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"})};var z=class t extends L{constructor(){super()}updateTitle(o){let e=this.buildTitle(o)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"})};var Gt=[{path:"error",component:C,children:[{path:"",component:U,title:"ERROR"}]},{path:"404",component:C,children:[{path:"",component:_,title:"NOT_FOUND"}]},{path:"",component:C,loadChildren:()=>import("./chunk-PPYG3AZD.js").then(t=>t.PublicRoutes),data:{preload:!0}},{path:"spaces",component:y,loadChildren:()=>import("./chunk-3OMDKZNZ.js").then(t=>t.SpaceRoutes),data:{preload:!0,delay:!0},canActivate:[X]},{path:"profile",component:y,loadChildren:()=>import("./chunk-GJMWX7YO.js").then(t=>t.ProfileRoutes),data:{preload:!1},canActivate:[X]},{path:"test",component:y,loadChildren:()=>import("./chunk-TMVWVXCX.js").then(t=>t.TestRoutes),data:{preload:!1}},{path:"**",redirectTo:"/404",pathMatch:"full"}],Jt=t=>()=>{let o=m(c);t.events.pipe(tt(e=>e instanceof K||e instanceof Q||e instanceof St)).subscribe(e=>{e instanceof K?e.urlAfterRedirects==="/404"?e.url!=="/404"&&o.emitUrl(e.url):o.emitUrl(e.urlAfterRedirects):e instanceof Q&&o.emitUrl(e.url)})},Ht=[xt(Gt,wt(),At({scrollPositionRestoration:"disabled"}),Ft(W),Pt(),Ot({paramsInheritanceStrategy:"always",onSameUrlNavigation:"reload"})),{provide:D,useClass:V},{provide:L,useClass:z},{provide:nt,multi:!0,useFactory:Jt,deps:[E]}];var Z=class t{handleError(o){_debug(o,"Unhandled Error","e")}static \u0275fac=function(e){return new(e||t)};static \u0275prov=a({token:t,factory:t.\u0275fac})};var jt=new yt(()=>"");var Kt=()=>{let t=m(v),o={},e=t.GetToken();return e&&e!==""&&(o.Authorization=`Bearer ${e}`),o["Accept-Language"]=T.language,o};var Tt=(t,o)=>{let e=m(c);if(t.url.indexOf("localdata")>-1)return o(t);let r=j.Config.API.apiRoot+t.url,f=t.clone({url:r,setHeaders:Kt()});return e.show(t.context.get(jt)),t.body&&_debug(t.body,`Request ${t.method} ${t.urlWithParams}`,"p"),o(f).pipe(rt(),et(()=>{e.hide(t.context.get(jt))}),N(`${t.method} ${t.urlWithParams}`,"p"),H(`${t.method} ${t.urlWithParams}`))};var $t=(t,o)=>{let e=m("serverUrl",{optional:!0});if(t.url.indexOf("localdata")<0)return o(t);let r=t.url;e&&(r=`${e}/${T.language}/${t.url}`);let f=t.clone({url:r});return o(f).pipe(N(`${t.method} ${t.urlWithParams}`,"p"),H(`${t.method} ${t.urlWithParams}`))};var kt=[Ct(bt([$t,Tt])),{provide:ft,useFactory:Mt,multi:!0,deps:[j]},{provide:st,useClass:Z}];var _t={providers:[ht({eventCoalescing:!0}),...kt,...Ht]};Dt.production&&void 0;It(k,_t);
