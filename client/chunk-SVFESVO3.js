import{a as le,b as me,c as de,d as ue,e as fe,f as ve,g as _e,h as nt,i as at,j as he,k as Y,l as Se,m as ge}from"./chunk-PR2Q7UBV.js";import{c as X,d as rt}from"./chunk-JBHKJTVI.js";import{a as Z,b as H,c as Ie}from"./chunk-NSIISM5U.js";import"./chunk-Z3BPB6WE.js";import{$ as p,Aa as N,Ba as $,Ca as D,D as I,Da as ce,E as C,Ea as Je,Fa as h,G as ke,Ga as y,H as K,Ha as Ke,L as Ge,M as Ae,Ma as Fe,N as n,O as m,Oa as We,Pa as pe,Qa as G,R as _,Ra as F,Sa as W,Ta as Xe,Ua as S,W as u,Z as Be,_a as Ye,a as g,aa as ae,b as k,cb as Ze,da as x,ea as $e,fa as qe,g as Me,ga as Ue,gb as et,ha as a,i as O,ia as s,ja as v,jb as U,kb as tt,m as je,ma as b,na as f,oa as l,pa as He,qa as Qe,rb as R,s as J,sa as ze,sb as it,t as ne,vb as ot,w as E,wa as c,xa as T,xb as A,ya as w,z as j,za as se}from"./chunk-ZJ25XDQ3.js";function mt(i,t){if(i&1){let e=b();a(0,"i",5),f("click",function(){I(e);let r=l(2);return C(r.toggle())}),c(1),s()}if(i&2){let e=l(2);n(),T(e.resource.expanded?"openfolder":"folder")}}function dt(i,t){if(i&1){let e=b();a(0,"i",5),f("click",function(){I(e);let r=l(2);return C(r.toggle())}),c(1,"templates"),s()}}function ut(i,t){if(i&1&&(a(0,"div",6),c(1),a(2,"div",7),c(3),s()()),i&2){let e=l(2);n(),se(" ",e.resource.shortname," - ",e.resource.contentType,". "),n(2),w(" ",e.resource.description," ")}}function ft(i,t){if(i&1){let e=b();a(0,"div",8),c(1),h(2,"date"),v(3,"br"),a(4,"span",9),c(5),h(6,"date"),s()(),a(7,"div",10)(8,"i",11),f("click",function(){I(e);let r=l(2);return C(r.delete())}),c(9,"delete"),s()()}if(i&2){let e=l(2);n(),w(" Last updated: ",y(2,2,e.resource.updated)," "),n(4),w("Created ",y(6,4,e.resource.created),"")}}function vt(i,t){if(i&1){let e=b();a(0,"div",0)(1,"div",1),u(2,mt,2,1,"i",2)(3,dt,2,0,"i",2),a(4,"a",3),f("click",function(){I(e);let r=l();return C(r.select())}),c(5),s(),u(6,ut,4,3,"div",4),s(),u(7,ft,10,6),s()}if(i&2){let e=l();n(2),p("ngIf",e.resource.type==="folder"),n(),p("ngIf",e.resource.type!=="folder"),n(2),T(e.resource.displayname),n(),p("ngIf",e.mode.full),n(),x(e.mode.full?7:-1)}}var ee=class i{resource;mode={full:!1};onToggle=new K;onSelect=new K;onDelete=new K;constructor(){}ngOnInit(){}toggle(){this.onToggle.emit(this.resource)}select(){this.onSelect.emit(this.resource)}delete(){this.onDelete.emit(this.resource)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["dm-resource-card"]],inputs:{resource:"resource",mode:"mode"},outputs:{onToggle:"onToggle",onSelect:"onSelect",onDelete:"onDelete"},decls:1,vars:1,consts:[[1,"card"],[1,"content"],["class","liga cam rbreath",3,"click",4,"ngIf"],[1,"cam",3,"click"],["class","small",4,"ngIf"],[1,"liga","cam","rbreath",3,"click"],[1,"small"],[1,"light"],[1,"tail"],[1,"smaller"],[1,"hbreath"],[1,"liga","a",3,"click"]],template:function(e,o){e&1&&u(0,vt,8,5,"div",0),e&2&&x(o.resource?0:-1)},dependencies:[S,G,W,R],encapsulation:2,changeDetection:0})};var ie=class i extends X{constructor(){super()}static \u0275fac=function(e){return new(e||i)};static \u0275prov=E({token:i,factory:i.\u0275fac})};var B=class i{constructor(t){this._http=t}GetResources(t={}){let e=Ie.MapQueryListOptions(t);return this._http.post(A.API.resource.query,e).pipe(O(o=>H.NewList(o,t)))}GetEntry(t={}){let e=it(Ie.MapEntryListOptions(g({withPayload:!0},t))),o=Ie.MapResourceUrlListOptions(A.API.resource.details,t).replace(":options",e);return this._http.get(o).pipe(O(r=>H.NewInstance(r,t)))}CreateResource(t,e=!1){let o=H.PrepCreate(t);return e?this._http.post(A.API.space.create,o).pipe(O(r=>k(g({},t),{id:ot()}))):this._http.post(A.API.resource.create,o).pipe(O(r=>g(g({},t),H.NewInstanceFromResponse(r,{space:t.space}))))}SaveResource(t){let e=H.PrepSave(t);return this._http.post(A.API.resource.delete,e).pipe(O(o=>g(g({},t),H.NewInstanceFromResponse(o,{space:t.space}))))}DeleteResource(t){let e=H.PrepDelete(t);return this._http.post(A.API.resource.delete,e).pipe(O(o=>!0))}static \u0275fac=function(e){return new(e||i)(j(Ye))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})};var V=class i extends rt{constructor(){super()}static \u0275fac=function(e){return new(e||i)};static \u0275prov=E({token:i,factory:i.\u0275fac})};var M=class i extends X{constructor(e){super("DEBUG");this.resourceService=e;super.SetList([])}GetResources(e,o){let r=o?.id||e,d=this.currentList.find(L=>L.id===r);return d?.populated?this.GetChildren(r):this.resourceService.GetResources({space:e,resourceType:o?.type,subpath:o?.subpath}).pipe(J(L=>(d&&(d.populated=!0),this.appendList(L.matches.map(z=>k(g({},z),{parentId:r,expanded:!1,populated:!1}))))),J(L=>this.GetChildren(r)))}GetChildren(e){return Me(this.currentList.filter(o=>o.parentId===e))}Sync(e){if(e?.path&&e?.source==="route"){let o=e.path.split("/");this.currentList.filter(r=>r.type==="folder").forEach(r=>{o.includes(r.shortname)&&(r.expanded=!0)})}}Toggle(e){e.type==="folder"&&this.editItem(k(g({},e),{expanded:!e.expanded}))}AddFolder(e,o){let r=this.currentList.find(d=>d.path===`${e.space}/folder/${o}`);r&&r.populated&&this.addItem(k(g({},e),{parentId:r.id,expanded:!1,populated:!1}))}DeleteFolder(e){this.removeItem(e)}static \u0275fac=function(o){return new(o||i)(j(B))};static \u0275prov=E({token:i,factory:i.\u0275fac})};var ht=()=>({full:!0});function St(i,t){if(i&1){let e=b();a(0,"li")(1,"dm-resource-card",2),f("onDelete",function(r){I(e);let d=l(3);return C(d.delete(r))})("onSelect",function(r){I(e);let d=l(3);return C(d.goto(r))}),s()()}if(i&2){let e=t.$implicit;n(),p("resource",e)("mode",Je(2,ht))}}function gt(i,t){if(i&1&&(a(0,"ul",0),u(1,St,2,3,"li",1),s()),i&2){l(2);let e=D(0);n(),p("ngForOf",e)}}function It(i,t){if(i&1&&(a(0,"pre"),c(1),h(2,"json"),s()),i&2){l(2);let e=D(0);n(),T(y(2,1,e.body))}}function Ct(i,t){if(i&1&&v(0,"div",4),i&2){l(2);let e=D(0);p("innerHTML",e.body,Ge)}}function yt(i,t){if(i&1&&(a(0,"div")(1,"h3"),c(2),s(),a(3,"div"),c(4),s(),u(5,It,3,3,"pre")(6,Ct,1,1,"div",4),s()),i&2){l();let e=D(0);n(2),T(e.displayname),n(2),T(e.description),n(),x(e.contentType==="json"?5:-1),n(),x(e.contentType==="html"?6:-1)}}function Rt(i,t){if(i&1&&(N(0),a(1,"pre"),c(2),h(3,"json"),s(),u(4,yt,7,4,"div",3)),i&2){l(2);let e=D(0),o=$(e[0]);n(2),w("      ",y(3,3,o),`
    `),n(2),p("ngIf",o)}}function xt(i,t){if(i&1&&u(0,gt,2,1,"ul",0)(1,Rt,5,5),i&2){let e=l();x(e.type==="folder"?0:-1),n(),x(e.type==="content"?1:-1)}}var xe=class i{constructor(t,e,o,r,d,L){this.resourceService=t;this.pathState=e;this.treeState=o;this.resourecState=r;this.toast=d;this.router=L}space;type;set path(t){t!==null&&this.pathState.SetState({path:t,type:this.type,space:this.space,source:"route"})}resources$;ngOnInit(){this.resources$=this.pathState.stateItem$.pipe(je(t=>t?.source==="route"),J(t=>this.resourceService.GetResources({space:this.space,subpath:t.path,resourceType:this.type})),J(t=>this.resourecState.SetList(t.matches)))}goto(t){this.router.navigateByUrl(`/spaces/${t.path}`)}delete(t){this.resourceService.DeleteResource(t).subscribe({next:()=>{this.treeState.DeleteFolder(t),this.resourecState.removeItem(t),this.toast.ShowSuccess("DONE")}})}static \u0275fac=function(e){return new(e||i)(m(B),m(V),m(M),m(ie),m(Y),m(U))};static \u0275cmp=_({type:i,selectors:[["ng-component"]],inputs:{space:"space",type:"type",path:"path"},features:[ce([ie])],decls:3,vars:4,consts:[[1,"rowlist"],[4,"ngFor","ngForOf"],[3,"onDelete","onSelect","resource","mode"],[4,"ngIf"],[3,"innerHTML"]],template:function(e,o){if(e&1&&(N(0),h(1,"async"),u(2,xt,2,2)),e&2){let r=$(y(1,1,o.resources$));n(2),x(r?2:-1)}},dependencies:[S,pe,G,F,Xe,R,ee],encapsulation:2,changeDetection:0})};function bt(i,t){if(i&1&&(N(0),h(1,"async"),v(2,"dm-resource-nodes",4)),i&2){let e=l().$implicit,o=l(2),r=y(1,2,o.GetChildren(e));n(2),p("space",o.space)("nodes",r)}}function Dt(i,t){if(i&1){let e=b();a(0,"li")(1,"dm-resource-card",3),f("onSelect",function(){let r=I(e).$implicit,d=l(2);return C(d.select(r))})("onToggle",function(){let r=I(e).$implicit,d=l(2);return C(d.toggle(r))}),s(),u(2,bt,3,4,"dm-resource-nodes",4),s()}if(i&2){let e=t.$implicit;n(),p("resource",e),n(),x(e.expanded?2:-1)}}function Pt(i,t){if(i&1&&(a(0,"ul",1),u(1,Dt,3,2,"li",2),s()),i&2){let e=l();n(),p("ngForOf",e.nodes)}}var De=class i{constructor(t,e,o){this.treeState=t;this.router=e;this.pathState=o}nodes;space;ngOnInit(){}GetChildren(t){return this.treeState.GetResources(this.space,t).pipe(ne(e=>this.treeState.Sync(this.pathState.currentItem)))}select(t){this.router.navigateByUrl(`/spaces/${t.path}`)}toggle(t){t.type==="folder"&&(this.pathState.UpdateState({source:"toggle"}),this.treeState.Toggle(t))}static \u0275fac=function(e){return new(e||i)(m(M),m(U),m(V))};static \u0275cmp=_({type:i,selectors:[["dm-resource-nodes"]],inputs:{nodes:"nodes",space:"space"},decls:1,vars:1,consts:[["class","alist lbreath breath",4,"ngIf"],[1,"alist","lbreath","breath"],[4,"ngFor","ngForOf"],[3,"onSelect","onToggle","resource"],[3,"space","nodes"]],template:function(e,o){e&1&&u(0,Pt,2,1,"ul",0),e&2&&p("ngIf",o.nodes==null?null:o.nodes.length)},dependencies:[i,S,pe,G,F,R,ee],encapsulation:2,changeDetection:0})};var Pe=class i{constructor(t,e){this.treeState=t;this.pathState=e}id;space;nodes$;ngOnInit(){this.nodes$=this.treeState.GetResources(this.space,null).pipe(ne(t=>this.treeState.Sync(this.pathState.currentItem)))}static \u0275fac=function(e){return new(e||i)(m(M),m(V))};static \u0275cmp=_({type:i,selectors:[["dm-resource-list"]],inputs:{id:"id",space:"space"},decls:3,vars:4,consts:[[3,"nodes","space"]],template:function(e,o){if(e&1&&(N(0),h(1,"async"),v(2,"dm-resource-nodes",0)),e&2){let r=y(1,2,o.nodes$);n(2),p("nodes",r)("space",o.space)}},dependencies:[S,F,R,De],encapsulation:2,changeDetection:0})};function Tt(i,t){i&1&&(a(0,"md-input",9),v(1,"input",10),s(),a(2,"md-input",11),v(3,"input",12),s()),i&2&&(n(),p("required",!0),n(2),p("required",!1))}var we=class i{constructor(t,e){this.fb=t;this.toast=e}data;dialog;forceValidation=!1;resourceForm;ngOnInit(){this.resourceForm=this.fb.group({displayname:[],shortname:[],description:[],type:[this.data?.type||"folder"],contentType:["json"],body:[]})}saveSpace(){if(this.forceValidation=!1,this.toast.Hide(),this.resourceForm.valid){let t=this.resourceForm.value,e=g({},t);this.dialog.close(e)}else this.forceValidation=!0,this.toast.ShowError("INVALID_FORM")}static \u0275fac=function(e){return new(e||i)(m(at),m(Y))};static \u0275cmp=_({type:i,selectors:[["ng-component"]],decls:12,vars:7,consts:[["novalidate","",3,"ngSubmit","formGroup"],["placeholder","Display name (en)"],["type","text","mdinput","","formControlName","displayname",1,"md-input","w100",3,"required"],["placeholder","Shortname"],["type","text","mdinput","","formControlName","shortname",1,"md-input","w100",3,"required"],["helptext","",1,"md-help-text"],["placeholder","Description (en)"],["type","text","mdinput","","formControlName","description",1,"md-input","w100",3,"required"],["type","submit",1,"btn-rev"],["placeholder","Content type"],["type","text","mdinput","","formControlName","contentType",1,"md-input","w100",3,"required"],["placeholder","Body"],["type","text","mdinput","","formControlName","body",1,"md-input","w100",3,"required"]],template:function(e,o){e&1&&(a(0,"form",0),f("ngSubmit",function(){return o.saveSpace()}),a(1,"md-input",1),v(2,"input",2),s(),a(3,"md-input",3),v(4,"input",4),a(5,"div",5),c(6,"No spacecs allowed"),s()(),a(7,"md-input",6),v(8,"input",7),s(),u(9,Tt,4,2),a(10,"button",8),c(11,"Save"),s()()),e&2&&(ae("was-validated",o.forceValidation),p("formGroup",o.resourceForm),n(2),p("required",!0),n(2),p("required",!0),n(4),p("required",!1),n(),x(o.data.type!=="folder"?9:-1))},dependencies:[S,R,he,ge,Se,ue,le,me,de,_e,fe,ve],encapsulation:2,changeDetection:0})};var Nt=["*"],Le=class i{onClose=new K;options;close(t){this.onClose.emit(t)}onClick(t){t.matches(".d-overlay")&&this.close(null)}onEscape(t){t.code==="Escape"&&this.close(null)}onMouseDown(t){t.matches(".d-overlay, .modal-dialog, .modal")&&!this.options.ismodal&&this.close(null)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["cr-dialog"]],hostBindings:function(e,o){e&1&&f("click",function(d){return o.onClick(d.target)})("keydown",function(d){return o.onEscape(d)},!1,Ae)("mousedown",function(d){return o.onMouseDown(d.target)})},outputs:{onClose:"onClose"},ngContentSelectors:Nt,decls:8,vars:1,consts:[[1,"modal-overlay","d-overlay"],["role","dialog","aria-labelledby","dialogtitle","tabindex","-1",1,"modal"],[1,"modal-header"],["id","dialogtitle",1,"f6","modal-title"],["type","button",1,"modal-close",3,"click"],[1,"modal-body"]],template:function(e,o){e&1&&(He(),a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h6",3),c(4),s(),a(5,"button",4),f("click",function(){return o.close()}),s()(),a(6,"div",5),Qe(7),s()()()),e&2&&(n(4),T(o.options==null?null:o.options.title))},dependencies:[S],encapsulation:2,changeDetection:0})};var Q=class i{constructor(t,e){this.appRef=t;this.doc=e}dialogs={};open(t,e){let o=e?.providers?.length?ke.create({providers:e.providers}):void 0,r=Fe(t,{environmentInjector:this.appRef.injector,elementInjector:o});this.appRef.attachView(r.hostView);let d=r.hostView.rootNodes,L=Fe(Le,{environmentInjector:this.appRef.injector,projectableNodes:[d]}),z=L.hostView.rootNodes[0];e?.id&&(z.id=e.id,this.dialogs[e.id]=L.instance),e?.css&&z.classList.add(...e.css.split(" ")),this.doc.body.append(z),this.appRef.attachView(L.hostView),L.instance.options=k(g({},e),{ismodal:e?.ismodal||!1,title:e?.title||""}),r.instance.data=e?.data,r.instance.dialog=L.instance,r.instance.dialogElement=z;let pt=L.instance.onClose.subscribe(lt=>{e?.onclose&&e.onclose(lt),this.appRef.detachView(L.hostView),L.destroy(),this.appRef.detachView(r.hostView),r.destroy(),e?.id&&delete this.dialogs[e.id],pt.unsubscribe()});return r.instance}get(t){return this.dialogs[t]||null}static \u0275fac=function(e){return new(e||i)(j(Be),j(We))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})};function Ot(i,t){if(i&1){let e=b();a(0,"a",2),f("click",function(){I(e);let r=l(2),d=D(0);return C(r.createFolder(d,r.enumResourceType.FOLDER))}),a(1,"i",3),c(2,"plus"),s(),c(3," Add folder"),s()}}function Ft(i,t){if(i&1){let e=b();a(0,"div",0),c(1),u(2,Ot,4,0,"a",1),c(3," | "),a(4,"a",2),f("click",function(){I(e);let r=l(),d=D(0);return C(r.createFolder(d,r.enumResourceType.CONTENT))}),a(5,"i",3),c(6,"plus"),s(),c(7," Add content"),s()()}if(i&2){let e=l(),o=D(0);n(),w("",o.path," "),n(),p("ngIf",o.type===e.enumResourceType.FOLDER)}}var Ee=class i{constructor(t,e,o,r,d){this.pathState=t;this.dialog=e;this.router=o;this.resourceListState=r;this.resourceService=d}space;enumResourceType=Z;ngOnInit(){}createFolder(t,e){this.dialog.open(we,{title:"create folder",css:"modal-half-screen animate fromend",data:{type:e},onclose:o=>{o&&this.resourceService.CreateResource(k(g({},o),{subpath:t.path,space:this.space})).subscribe({next:r=>{this.resourceListState.AddFolder(r,t.path),this.router.navigateByUrl(`/spaces/${r.path}`)}})}})}static \u0275fac=function(e){return new(e||i)(m(V),m(Q),m(U),m(M),m(B))};static \u0275cmp=_({type:i,selectors:[["dm-resource-path"]],inputs:{space:"space"},decls:3,vars:4,consts:[[1,"small","spaced"],[3,"click",4,"ngIf"],[3,"click"],[1,"liga"]],template:function(e,o){if(e&1&&(N(0),h(1,"async"),u(2,Ft,8,2,"div",0)),e&2){let r=$(y(1,1,o.pathState.stateItem$));n(2),x(r?2:-1)}},dependencies:[S,G,F,R],encapsulation:2,changeDetection:0})};var oe=class i{constructor(t,e){this.fb=t;this.toast=e}data;dialog;forceValidation=!1;spaceForm;ngOnInit(){this.spaceForm=this.fb.group({displayname:[],shortname:[],description:[]}),this.data.space&&this.spaceForm.patchValue(this.data.space)}saveSpace(){if(this.forceValidation=!1,this.toast.Hide(),this.spaceForm.valid){let t=this.spaceForm.value,e=g({},t);this.dialog.close(e)}else this.forceValidation=!0,this.toast.ShowError("INVALID_FORM")}static \u0275fac=function(e){return new(e||i)(m(nt),m(Y))};static \u0275cmp=_({type:i,selectors:[["ng-component"]],decls:11,vars:6,consts:[["novalidate","",3,"ngSubmit","formGroup"],["placeholder","Display name (en)"],["type","text","mdinput","","formControlName","displayname",1,"md-input","w100",3,"required"],["placeholder","Shortname"],["type","text","mdinput","","formControlName","shortname",1,"md-input","w100",3,"required"],["helptext","",1,"md-help-text"],["placeholder","Description (en)"],["type","text","mdinput","","formControlName","description",1,"md-input","w100",3,"required"],["type","submit",1,"btn-rev"]],template:function(e,o){e&1&&(a(0,"form",0),f("ngSubmit",function(){return o.saveSpace()}),a(1,"md-input",1),v(2,"input",2),s(),a(3,"md-input",3),v(4,"input",4),a(5,"div",5),c(6,"No spacecs allowed"),s()(),a(7,"md-input",6),v(8,"input",7),s(),a(9,"button",8),c(10,"Save"),s()()),e&2&&(ae("was-validated",o.forceValidation),p("formGroup",o.spaceForm),n(2),p("required",!0),n(2),p("required",!0),n(4),p("required",!1))},dependencies:[S,R,he,ge,Se,ue,le,me,de,_e,fe,ve],encapsulation:2,changeDetection:0})};var Te=class i{constructor(t){this.resourceService=t}_GetSpace(t){return this.resourceService.GetEntry({space:t,resourceType:"space",subpath:`${A.API.rootPath}/${t}`,withPayload:!0,withAttachments:!0})}GetSpace(t){return this.resourceService.GetEntry({space:t,resourceType:"space",subpath:`${A.API.rootPath}/${t}`,withPayload:!0,withAttachments:!0})}GetSpaces(){return this.resourceService.GetResources({type:"spaces"})}CreateSpace(t){return this.resourceService.CreateResource({type:"space",displayname:t.displayname,shortname:t.shortname,space:t.shortname,subpath:"/",description:t.description},!0)}DeleteSpace(t){return this.resourceService.DeleteResource(t)}UpdateSpace(t){return this.resourceService.SaveResource({type:"space",displayname:t.displayname,shortname:t.shortname,space:t.shortname,subpath:"/",description:t.description,id:t.id})}static \u0275fac=function(e){return new(e||i)(j(B))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})};var re=class i extends X{constructor(e){super("DEBUG");this.spaceService=e;this.spaceService.GetSpaces().subscribe({next:o=>{super.SetList(o.matches)}})}GetSpace(e){return this.stateList$.pipe(O(o=>o.find(r=>r.shortname===e)))}Create(e){return this.spaceService.CreateSpace(e).pipe(O(o=>o?(super.addItem(o),!0):!1))}Delete(e){return this.spaceService.DeleteSpace(e).pipe(O(o=>o?(super.removeItem(e),!0):!1))}Update(e){return this.spaceService.UpdateSpace(e).pipe(O(o=>o?(super.editItem(o),!0):!1))}static \u0275fac=function(o){return new(o||i)(j(Te))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})};function Mt(i,t){if(i&1){let e=b();a(0,"div",2),c(1),h(2,"date"),v(3,"br"),a(4,"span",3),c(5),h(6,"date"),s(),a(7,"div")(8,"button",4),f("click",function(){I(e);let r=l(),d=D(2);return C(r.delete(d))}),a(9,"i",5),c(10,"delete"),s()(),a(11,"button",4),f("click",function(){I(e);let r=l(),d=D(2);return C(r.edit(d))}),a(12,"i",5),c(13,"edit"),s()()()(),a(14,"h1"),c(15),s(),c(16),a(17,"div",6),c(18),s(),a(19,"div",7)(20,"div",8),v(21,"dm-resource-list",9),s(),a(22,"div",10),v(23,"dm-resource-path",9)(24,"router-outlet"),s()()}if(i&2){l();let e=D(2);n(),w(" Last updated: ",y(2,7,e.updated)," "),n(4),w("Created ",y(6,9,e.created),""),n(10),T(e.displayname),n(),w(" ",e.shortname," "),n(2),w(" ",e.description," "),n(3),p("space",e.space),n(2),p("space",e.space)}}var Ne=class i{constructor(t,e,o){this.router=t;this.dialog=e;this.spaceListState=o}space;space$;ngOnInit(){this.space$=this.spaceListState.GetSpace(this.space)}delete(t){this.spaceListState.Delete(t).subscribe({next:e=>{e&&this.router.navigateByUrl("/spaces")}})}edit(t){this.dialog.open(oe,{title:"New space",data:{mode:{forNew:!1},space:t},onclose:e=>{e&&this.spaceListState.Update(e).subscribe({next:o=>{}})}})}static \u0275fac=function(e){return new(e||i)(m(U),m(Q),m(re))};static \u0275cmp=_({type:i,selectors:[["ng-component"]],inputs:{space:"space"},features:[ce([M,V])],decls:5,vars:4,consts:[[1,"page"],[1,"container"],[1,"r","txt-r"],[1,"smaller"],[1,"btn-fake",3,"click"],[1,"liga"],[1,"spaced","light"],[1,"row-spaced"],[1,"c-4"],[3,"space"],[1,"c-8"]],template:function(e,o){if(e&1&&(a(0,"div",0)(1,"div",1),N(2),h(3,"async"),u(4,Mt,25,11),s()()),e&2){n(2);let r=$(y(3,1,o.space$));n(2),x(r?4:-1)}},dependencies:[S,F,W,R,et,Pe,Ee],encapsulation:2,changeDetection:0})};function jt(i,t){if(i&1&&(a(0,"li")(1,"div",6)(2,"div")(3,"a",7),c(4),s(),a(5,"div",8),c(6),s()(),a(7,"div",9),c(8),h(9,"date"),s()()()),i&2){let e=t.$implicit;n(3),ze("routerLink","/spaces/",e.shortname,"/folder"),n(),T(e.displayname),n(2),se("",e.shortname," ",e.description,""),n(2),w(" ",Ke(9,6,e.updated,"shortDate")," ")}}function kt(i,t){if(i&1&&(a(0,"ul",5),qe(1,jt,10,9,"li",null,$e),s()),i&2){l();let e=D(5);n(),Ue(e)}}var Oe=class i{constructor(t,e){this.spaceListState=t;this.dialog=e}spaces$;ngOnInit(){this.spaces$=this.spaceListState.stateList$}create(){this.dialog.open(oe,{title:"New space",data:{mode:{forNew:!0}},onclose:t=>{t&&this.spaceListState.Create(t).subscribe({next:()=>{}})}})}static \u0275fac=function(e){return new(e||i)(m(re),m(Q))};static \u0275cmp=_({type:i,selectors:[["ng-component"]],decls:8,vars:4,consts:[[1,"page"],[1,"container"],[1,"spaced"],[1,"btn-rev",3,"click"],["class","row-spaced uc-6 rowlist",4,"ngIf"],[1,"row-spaced","uc-6","rowlist"],[1,"card"],[1,"weight-bold",3,"routerLink"],[1,"smaller","light"],[1,"tail","smaller"]],template:function(e,o){if(e&1){let r=b();a(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),f("click",function(){return I(r),C(o.create())}),c(4,"Create new"),s()(),N(5),h(6,"async"),u(7,kt,3,0,"ul",4),s()()}if(e&2){n(5);let r=$(y(6,1,o.spaces$));n(2),p("ngIf",r)}},dependencies:[S,G,F,W,R,tt],encapsulation:2,changeDetection:0})};var Uo=[{path:"",component:Oe},{component:Ne,path:":space",children:[{component:xe,matcher:i=>i.length>0?{consumed:i,posParams:{type:i[0],path:new Ze(i.slice(1).join("/"),{})}}:null}]}];export{Uo as SpaceRoutes};
