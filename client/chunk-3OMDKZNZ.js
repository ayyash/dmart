import{a as me,b as de,c as ue,d as fe,e as ve,f as _e,g as he,i as Se,j as ge,k as Y,l as Ie,m as ye}from"./chunk-2MWWAZJ2.js";import{c as X,d as at}from"./chunk-JGFSGBRL.js";import{a as Z,b as Q,c as Ce}from"./chunk-BAM3G3N6.js";import"./chunk-4GN7QOP4.js";import{$a as et,Aa as pe,Ba as h,C as v,Ca as Ke,Da as g,Ea as y,Fa as We,H as b,I as D,Ia as Xe,K as Ae,L as H,Na as je,P as Be,Pa as Ye,Q as $e,Qa as le,R as n,Ra as G,S as l,Sa as O,Ta as K,Ua as Ze,Va as S,W as u,Y as p,Z as se,a as C,aa as R,b as k,ba as qe,ca as Ue,da as He,db as tt,ea as a,fa as s,g as ke,ga as _,hb as it,i as q,ja as L,ka as f,kb as W,la as m,lb as ot,m as Ge,ma as Qe,na as ze,pa as Je,s as J,sb as I,t as ae,ta as c,tb as rt,ua as F,va as P,w as E,wa as ce,wb as nt,xa as N,ya as U,yb as A,z as j,za as T}from"./chunk-QUNHBVRW.js";function ut(i,t){if(i&1){let e=L();a(0,"i",5),f("click",function(){b(e);let r=m(2);return D(r.toggle())}),c(1),s()}if(i&2){let e=m(2);n(),F(e.resource.expanded?"openfolder":"folder")}}function ft(i,t){if(i&1){let e=L();a(0,"i",5),f("click",function(){b(e);let r=m(2);return D(r.toggle())}),c(1,"templates"),s()}}function vt(i,t){if(i&1&&(a(0,"div",6),c(1),a(2,"div",7),c(3),s()()),i&2){let e=m(2);n(),ce(" ",e.resource.shortname," - ",e.resource.contentType,". "),n(2),P(" ",e.resource.description," ")}}function _t(i,t){if(i&1){let e=L();a(0,"div",8),c(1),g(2,"date"),_(3,"br"),a(4,"span",9),c(5),g(6,"date"),s()(),a(7,"div",10)(8,"i",11),f("click",function(){b(e);let r=m(2);return D(r.delete())}),c(9,"delete"),s()()}if(i&2){let e=m(2);n(),P(" Last updated: ",y(2,2,e.resource.updated)," "),n(4),P("Created ",y(6,4,e.resource.created),"")}}function ht(i,t){if(i&1){let e=L();a(0,"div",0)(1,"div",1),u(2,ut,2,1,"i",2)(3,ft,2,0,"i",2),a(4,"a",3),f("click",function(){b(e);let r=m();return D(r.select())}),c(5),s(),u(6,vt,4,3,"div",4),s(),u(7,_t,10,6),s()}if(i&2){let e=m();n(2),p("ngIf",e.resource.type==="folder"),n(),p("ngIf",e.resource.type!=="folder"),n(2),F(e.resource.displayname),n(),p("ngIf",e.mode.full),n(),R(e.mode.full?7:-1)}}var ee=class i{resource;mode={full:!1};onToggle=new H;onSelect=new H;onDelete=new H;constructor(){}ngOnInit(){}toggle(){this.onToggle.emit(this.resource)}select(){this.onSelect.emit(this.resource)}delete(){this.onDelete.emit(this.resource)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["dm-resource-card"]],inputs:{resource:"resource",mode:"mode"},outputs:{onToggle:"onToggle",onSelect:"onSelect",onDelete:"onDelete"},standalone:!0,features:[h],decls:1,vars:1,consts:[[1,"card"],[1,"content"],["class","liga cam rbreath",3,"click",4,"ngIf"],[1,"cam",3,"click"],["class","small",4,"ngIf"],[1,"liga","cam","rbreath",3,"click"],[1,"small"],[1,"light"],[1,"tail"],[1,"smaller"],[1,"hbreath"],[1,"liga","a",3,"click"]],template:function(e,o){e&1&&u(0,ht,8,5,"div",0),e&2&&R(o.resource?0:-1)},dependencies:[S,G,K,I],encapsulation:2,changeDetection:0})};var ie=class i extends X{constructor(){super()}static \u0275fac=function(e){return new(e||i)};static \u0275prov=E({token:i,factory:i.\u0275fac})};var $=class i{constructor(t){this._http=t}GetResources(t={}){let e=Ce.MapQueryListOptions(t);return this._http.post(A.API.resource.query,e).pipe(q(o=>Q.NewList(o,t)))}GetEntry(t={}){let e=rt(Ce.MapEntryListOptions(C({withPayload:!0},t))),o=Ce.MapResourceUrlListOptions(A.API.resource.details,t).replace(":options",e);return this._http.get(o).pipe(q(r=>Q.NewInstance(r,t)))}CreateResource(t,e=!1){let o=Q.PrepCreate(t);return e?this._http.post(A.API.space.create,o).pipe(q(r=>k(C({},t),{id:nt()}))):this._http.post(A.API.resource.create,o).pipe(q(r=>C(C({},t),Q.NewInstanceFromResponse(r,{space:t.space}))))}SaveResource(t){let e=A.API.resource.save.replace(":id",t.id),o=Q.PrepSave(t);return this._http.put(e,o).pipe(q(r=>t))}DeleteResource(t){let e=Q.PrepDelete(t);return this._http.post(A.API.resource.delete,e).pipe(q(o=>!0))}static \u0275fac=function(e){return new(e||i)(j(et))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})};var M=class i extends at{constructor(){super()}static \u0275fac=function(e){return new(e||i)};static \u0275prov=E({token:i,factory:i.\u0275fac})};var V=class i extends X{constructor(e){super("DEBUG");this.resourceService=e;super.SetList([])}GetResources(e,o){let r=o?.id||e,d=this.currentList.find(w=>w.id===r);return d?.populated?this.GetChildren(r):this.resourceService.GetResources({space:e,resourceType:o?.type,subpath:o?.subpath}).pipe(J(w=>(d&&(d.populated=!0),this.appendList(w.matches.map(z=>k(C({},z),{parentId:r,expanded:!1,populated:!1}))))),J(w=>this.GetChildren(r)))}GetChildren(e){return ke(this.currentList.filter(o=>o.parentId===e))}Sync(e){if(e?.path&&e?.source==="route"){let o=e.path.split("/");this.currentList.filter(r=>r.type==="folder").forEach(r=>{o.includes(r.shortname)&&(r.expanded=!0)})}}Toggle(e){e.type==="folder"&&this.editItem(k(C({},e),{expanded:!e.expanded}))}AddFolder(e,o){let r=this.currentList.find(d=>d.path===`${e.space}/folder/${o}`);r&&r.populated&&this.addItem(k(C({},e),{parentId:r.id,expanded:!1,populated:!1}))}DeleteFolder(e){this.removeItem(e)}static \u0275fac=function(o){return new(o||i)(j($))};static \u0275prov=E({token:i,factory:i.\u0275fac})};var gt=()=>({full:!0});function It(i,t){if(i&1){let e=L();a(0,"li")(1,"dm-resource-card",2),f("onDelete",function(r){b(e);let d=m(3);return D(d.delete(r))})("onSelect",function(r){b(e);let d=m(3);return D(d.goto(r))}),s()()}if(i&2){let e=t.$implicit;n(),p("resource",e)("mode",Ke(2,gt))}}function yt(i,t){if(i&1&&(a(0,"ul",0),u(1,It,2,3,"li",1),s()),i&2){m(2);let e=T(0);n(),p("ngForOf",e)}}function Ct(i,t){if(i&1&&(a(0,"pre"),c(1),g(2,"json"),s()),i&2){m(2);let e=T(0);n(),F(y(2,1,e.body))}}function Rt(i,t){if(i&1&&_(0,"div",4),i&2){m(2);let e=T(0);p("innerHTML",e.body,Be)}}function xt(i,t){if(i&1&&(a(0,"div")(1,"h3"),c(2),s(),a(3,"div"),c(4),s(),u(5,Ct,3,3,"pre")(6,Rt,1,1,"div",4),s()),i&2){m();let e=T(0);n(2),F(e.displayname),n(2),F(e.description),n(),R(e.contentType==="json"?5:-1),n(),R(e.contentType==="html"?6:-1)}}function bt(i,t){if(i&1&&(N(0),a(1,"pre"),c(2),g(3,"json"),s(),u(4,xt,7,4,"div",3)),i&2){m(2);let e=T(0),o=U(e[0]);n(2),P("      ",y(3,3,o),`
    `),n(2),p("ngIf",o)}}function Dt(i,t){if(i&1&&u(0,yt,2,1,"ul",0)(1,bt,5,5),i&2){let e=m();R(e.type==="folder"?0:-1),n(),R(e.type==="content"?1:-1)}}var De=class i{constructor(t,e,o,r,d,w){this.resourceService=t;this.pathState=e;this.treeState=o;this.resourecState=r;this.toast=d;this.router=w}space;type;set path(t){t!==null&&this.pathState.SetState({path:t,type:this.type,space:this.space,source:"route"})}resources$;ngOnInit(){this.resources$=this.pathState.stateItem$.pipe(Ge(t=>t?.source==="route"),J(t=>this.resourceService.GetResources({space:this.space,subpath:t.path,resourceType:this.type})),J(t=>this.resourecState.SetList(t.matches)))}goto(t){this.router.navigateByUrl(`/spaces/${t.path}`)}delete(t){this.resourceService.DeleteResource(t).subscribe({next:()=>{this.treeState.DeleteFolder(t),this.resourecState.removeItem(t),this.toast.ShowSuccess("DONE")}})}static \u0275fac=function(e){return new(e||i)(l($),l(M),l(V),l(ie),l(Y),l(W))};static \u0275cmp=v({type:i,selectors:[["ng-component"]],inputs:{space:"space",type:"type",path:"path"},standalone:!0,features:[pe([ie]),h],decls:3,vars:4,consts:[[1,"rowlist"],[4,"ngFor","ngForOf"],[3,"onDelete","onSelect","resource","mode"],[4,"ngIf"],[3,"innerHTML"]],template:function(e,o){if(e&1&&(N(0),g(1,"async"),u(2,Dt,2,2)),e&2){let r=U(y(1,1,o.resources$));n(2),R(r?2:-1)}},dependencies:[S,le,G,O,Ze,I,ee],encapsulation:2,changeDetection:0})};function Pt(i,t){if(i&1&&(N(0),g(1,"async"),_(2,"dm-resource-nodes",4)),i&2){let e=m().$implicit,o=m(2),r=y(1,2,o.GetChildren(e));n(2),p("space",o.space)("nodes",r)}}function wt(i,t){if(i&1){let e=L();a(0,"li")(1,"dm-resource-card",3),f("onSelect",function(){let r=b(e).$implicit,d=m(2);return D(d.select(r))})("onToggle",function(){let r=b(e).$implicit,d=m(2);return D(d.toggle(r))}),s(),u(2,Pt,3,4,"dm-resource-nodes",4),s()}if(i&2){let e=t.$implicit;n(),p("resource",e),n(),R(e.expanded?2:-1)}}function Et(i,t){if(i&1&&(a(0,"ul",1),u(1,wt,3,2,"li",2),s()),i&2){let e=m();n(),p("ngForOf",e.nodes)}}var we=class i{constructor(t,e,o){this.treeState=t;this.router=e;this.pathState=o}nodes;space;ngOnInit(){}GetChildren(t){return this.treeState.GetResources(this.space,t).pipe(ae(e=>this.treeState.Sync(this.pathState.currentItem)))}select(t){this.router.navigateByUrl(`/spaces/${t.path}`)}toggle(t){t.type==="folder"&&(this.pathState.UpdateState({source:"toggle"}),this.treeState.Toggle(t))}static \u0275fac=function(e){return new(e||i)(l(V),l(W),l(M))};static \u0275cmp=v({type:i,selectors:[["dm-resource-nodes"]],inputs:{nodes:"nodes",space:"space"},standalone:!0,features:[h],decls:1,vars:1,consts:[["class","alist lbreath breath",4,"ngIf"],[1,"alist","lbreath","breath"],[4,"ngFor","ngForOf"],[3,"onSelect","onToggle","resource"],[3,"space","nodes"]],template:function(e,o){e&1&&u(0,Et,2,1,"ul",0),e&2&&p("ngIf",o.nodes==null?null:o.nodes.length)},dependencies:[i,S,le,G,O,I,ee],encapsulation:2,changeDetection:0})};var Ee=class i{constructor(t,e){this.treeState=t;this.pathState=e}id;space;nodes$;ngOnInit(){this.nodes$=this.treeState.GetResources(this.space,null).pipe(ae(t=>this.treeState.Sync(this.pathState.currentItem)))}static \u0275fac=function(e){return new(e||i)(l(V),l(M))};static \u0275cmp=v({type:i,selectors:[["dm-resource-list"]],inputs:{id:"id",space:"space"},standalone:!0,features:[h],decls:3,vars:4,consts:[[3,"nodes","space"]],template:function(e,o){if(e&1&&(N(0),g(1,"async"),_(2,"dm-resource-nodes",0)),e&2){let r=y(1,2,o.nodes$);n(2),p("nodes",r)("space",o.space)}},dependencies:[S,O,I,we],encapsulation:2,changeDetection:0})};function Nt(i,t){i&1&&(a(0,"md-input",9),_(1,"input",10),s(),a(2,"md-input",11),_(3,"input",12),s()),i&2&&(n(),p("required",!0),n(2),p("required",!1))}var Le=class i{constructor(t,e){this.fb=t;this.toast=e}data;dialog;forceValidation=!1;resourceForm;ngOnInit(){this.resourceForm=this.fb.group({displayname:[],shortname:[],description:[],type:[this.data?.type||"folder"],contentType:["json"],body:[]})}saveSpace(){if(this.forceValidation=!1,this.toast.Hide(),this.resourceForm.valid){let t=this.resourceForm.value,e=C({},t);this.dialog.close(e)}else this.forceValidation=!0,this.toast.ShowError("INVALID_FORM")}static \u0275fac=function(e){return new(e||i)(l(Se),l(Y))};static \u0275cmp=v({type:i,selectors:[["ng-component"]],standalone:!0,features:[h],decls:12,vars:7,consts:[["novalidate","",3,"ngSubmit","formGroup"],["placeholder","Display name (en)"],["type","text","mdinput","","formControlName","displayname",1,"md-input","w100",3,"required"],["placeholder","Shortname"],["type","text","mdinput","","formControlName","shortname",1,"md-input","w100",3,"required"],["helptext","",1,"md-help-text"],["placeholder","Description (en)"],["type","text","mdinput","","formControlName","description",1,"md-input","w100",3,"required"],["type","submit",1,"btn-rev"],["placeholder","Content type"],["type","text","mdinput","","formControlName","contentType",1,"md-input","w100",3,"required"],["placeholder","Body"],["type","text","mdinput","","formControlName","body",1,"md-input","w100",3,"required"]],template:function(e,o){e&1&&(a(0,"form",0),f("ngSubmit",function(){return o.saveSpace()}),a(1,"md-input",1),_(2,"input",2),s(),a(3,"md-input",3),_(4,"input",4),a(5,"div",5),c(6,"No spacecs allowed"),s()(),a(7,"md-input",6),_(8,"input",7),s(),u(9,Nt,4,2),a(10,"button",8),c(11,"Save"),s()()),e&2&&(se("was-validated",o.forceValidation),p("formGroup",o.resourceForm),n(2),p("required",!0),n(2),p("required",!0),n(4),p("required",!1),n(),R(o.data.type!=="folder"?9:-1))},dependencies:[S,I,ge,ye,Ie,fe,me,de,ue,he,ve,_e],encapsulation:2,changeDetection:0})};var Ot=["*"],Te=class i{onClose=new H;options;close(t){this.onClose.emit(t)}onClick(t){t.matches(".d-overlay")&&this.close(null)}onEscape(t){t.code==="Escape"&&this.close(null)}onMouseDown(t){t.matches(".d-overlay, .modal-dialog, .modal")&&!this.options.ismodal&&this.close(null)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["cr-dialog"]],hostBindings:function(e,o){e&1&&f("click",function(d){return o.onClick(d.target)})("keydown",function(d){return o.onEscape(d)},!1,$e)("mousedown",function(d){return o.onMouseDown(d.target)})},outputs:{onClose:"onClose"},standalone:!0,features:[h],ngContentSelectors:Ot,decls:8,vars:1,consts:[[1,"modal-overlay","d-overlay"],["role","dialog","aria-labelledby","dialogtitle","tabindex","-1",1,"modal"],[1,"modal-header"],["id","dialogtitle",1,"f6","modal-title"],["type","button",1,"modal-close",3,"click"],[1,"modal-body"]],template:function(e,o){e&1&&(Qe(),a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h6",3),c(4),s(),a(5,"button",4),f("click",function(){return o.close()}),s()(),a(6,"div",5),ze(7),s()()()),e&2&&(n(4),F(o.options==null?null:o.options.title))},dependencies:[S],encapsulation:2,changeDetection:0})};var oe=class i{constructor(t,e){this.appRef=t;this.doc=e}dialogs={};open(t,e){let o=e?.providers?.length?Ae.create({providers:e.providers}):void 0,r=je(t,{environmentInjector:this.appRef.injector,elementInjector:o});this.appRef.attachView(r.hostView);let d=r.hostView.rootNodes,w=je(Te,{environmentInjector:this.appRef.injector,projectableNodes:[d]}),z=w.hostView.rootNodes[0];e?.id&&(z.id=e.id,this.dialogs[e.id]=w.instance),e?.css&&z.classList.add(...e.css.split(" ")),this.doc.body.append(z),this.appRef.attachView(w.hostView),w.instance.options=k(C({},e),{ismodal:e?.ismodal||!1,title:e?.title||""}),r.instance.data=e?.data,r.instance.dialog=w.instance,r.instance.dialogElement=z;let mt=w.instance.onClose.subscribe(dt=>{e?.onclose&&e.onclose(dt),this.appRef.detachView(w.hostView),w.destroy(),this.appRef.detachView(r.hostView),r.destroy(),e?.id&&delete this.dialogs[e.id],mt.unsubscribe()});return r.instance}get(t){return this.dialogs[t]||null}static \u0275fac=function(e){return new(e||i)(j(Xe),j(Ye))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})};function Mt(i,t){if(i&1){let e=L();a(0,"a",2),f("click",function(){b(e);let r=m(2),d=T(0);return D(r.createFolder(d,r.enumResourceType.FOLDER))}),a(1,"i",3),c(2,"plus"),s(),c(3," Add folder"),s()}}function Vt(i,t){if(i&1){let e=L();a(0,"div",0),c(1),u(2,Mt,4,0,"a",1),c(3," | "),a(4,"a",2),f("click",function(){b(e);let r=m(),d=T(0);return D(r.createFolder(d,r.enumResourceType.CONTENT))}),a(5,"i",3),c(6,"plus"),s(),c(7," Add content"),s()()}if(i&2){let e=m(),o=T(0);n(),P("",o.path," "),n(),p("ngIf",o.type===e.enumResourceType.FOLDER)}}var Fe=class i{constructor(t,e,o,r,d){this.pathState=t;this.dialog=e;this.router=o;this.resourceListState=r;this.resourceService=d}space;enumResourceType=Z;ngOnInit(){}createFolder(t,e){this.dialog.open(Le,{title:"create folder",css:"modal-half-screen animate fromend",data:{type:e},onclose:o=>{o&&this.resourceService.CreateResource(k(C({},o),{subpath:t.path,space:this.space})).subscribe({next:r=>{this.resourceListState.AddFolder(r,t.path),this.router.navigateByUrl(`/spaces/${r.path}`)}})}})}static \u0275fac=function(e){return new(e||i)(l(M),l(oe),l(W),l(V),l($))};static \u0275cmp=v({type:i,selectors:[["dm-resource-path"]],inputs:{space:"space"},standalone:!0,features:[h],decls:3,vars:4,consts:[[1,"small","spaced"],[3,"click",4,"ngIf"],[3,"click"],[1,"liga"]],template:function(e,o){if(e&1&&(N(0),g(1,"async"),u(2,Vt,8,2,"div",0)),e&2){let r=U(y(1,1,o.pathState.stateItem$));n(2),R(r?2:-1)}},dependencies:[S,G,O,I],encapsulation:2,changeDetection:0})};var re=class i{constructor(t){this.resourceService=t}_GetSpace(t){return this.resourceService.GetEntry({space:t,resourceType:"space",subpath:`${A.API.rootPath}/${t}`,withPayload:!0,withAttachments:!0})}GetSpace(t){return this.resourceService.GetEntry({space:t,resourceType:"space",subpath:`${A.API.rootPath}/${t}`,withPayload:!0,withAttachments:!0})}GetSpaces(){return this.resourceService.GetResources({type:"spaces"})}CreateSpace(t){return this.resourceService.CreateResource({type:"space",displayname:t.displayname,shortname:t.shortname,space:t.shortname,subpath:"/",description:t.description},!0)}static \u0275fac=function(e){return new(e||i)(j($))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})};var ne=class i extends X{constructor(e){super("DEBUG");this.spaceService=e;this.spaceService.GetSpaces().subscribe({next:o=>{this.SetList(o.matches)}})}GetSpace(e){return this.stateList$.pipe(q(o=>o.find(r=>r.shortname===e)))}static \u0275fac=function(o){return new(o||i)(j(re))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})};function jt(i,t){if(i&1&&(a(0,"div",6),c(1),g(2,"date"),_(3,"br"),a(4,"span",7),c(5),g(6,"date"),s(),a(7,"i",8),c(8,"submenu"),s()(),a(9,"h1"),c(10),s(),c(11),a(12,"div",9),c(13),s()),i&2){m();let e=T(2);n(),P(" Last updated: ",y(2,5,e.updated)," "),n(4),P("Created ",y(6,7,e.created),""),n(5),F(e.displayname),n(),P(" ",e.shortname," "),n(2),P(" ",e.description," ")}}var Ne=class i{constructor(t){this.spaceListState=t}space;space$;ngOnInit(){this.space$=this.spaceListState.GetSpace(this.space)}static \u0275fac=function(e){return new(e||i)(l(ne))};static \u0275cmp=v({type:i,selectors:[["ng-component"]],inputs:{space:"space"},standalone:!0,features:[pe([V,M]),h],decls:11,vars:6,consts:[[1,"page"],[1,"container"],[1,"row-spaced"],[1,"c-4"],[3,"space"],[1,"c-8"],[1,"r","txt-r"],[1,"smaller"],[1,"liga"],[1,"spaced","light"]],template:function(e,o){if(e&1&&(a(0,"div",0)(1,"div",1),N(2),g(3,"async"),u(4,jt,14,9),a(5,"div",2)(6,"div",3),_(7,"dm-resource-list",4),s(),a(8,"div",5),_(9,"dm-resource-path",4)(10,"router-outlet"),s()()()()),e&2){n(2);let r=U(y(3,3,o.space$));n(2),R(r?4:-1),n(3),p("space",o.space),n(2),p("space",o.space)}},dependencies:[S,O,K,I,it,Ee,Fe],encapsulation:2,changeDetection:0})};var Oe=class i{constructor(t,e){this.fb=t;this.toast=e}mode={forNew:!0};onSave=new H;forceValidation=!1;spaceForm;ngOnInit(){this.spaceForm=this.fb.group({displayname:[],shortname:[],description:[]})}saveSpace(){if(this.forceValidation=!1,this.toast.Hide(),this.spaceForm.valid){let t=this.spaceForm.value,e=C({},t);this.onSave.emit(e)}else this.forceValidation=!0,this.toast.ShowError("INVALID_FORM")}static \u0275fac=function(e){return new(e||i)(l(Se),l(Y))};static \u0275cmp=v({type:i,selectors:[["dm-space-form"]],inputs:{mode:"mode"},outputs:{onSave:"onSave"},standalone:!0,features:[h],decls:11,vars:6,consts:[["novalidate","",3,"ngSubmit","formGroup"],["placeholder","Display name (en)"],["type","text","mdinput","","formControlName","displayname",1,"md-input","w100",3,"required"],["placeholder","Shortname"],["type","text","mdinput","","formControlName","shortname",1,"md-input","w100",3,"required"],["helptext","",1,"md-help-text"],["placeholder","Description (en)"],["type","text","mdinput","","formControlName","description",1,"md-input","w100",3,"required"],["type","submit",1,"btn-rev"]],template:function(e,o){e&1&&(a(0,"form",0),f("ngSubmit",function(){return o.saveSpace()}),a(1,"md-input",1),_(2,"input",2),s(),a(3,"md-input",3),_(4,"input",4),a(5,"div",5),c(6,"No spacecs allowed"),s()(),a(7,"md-input",6),_(8,"input",7),s(),a(9,"button",8),c(10,"Save"),s()()),e&2&&(se("was-validated",o.forceValidation),p("formGroup",o.spaceForm),n(2),p("required",!0),n(2),p("required",!0),n(4),p("required",!1))},dependencies:[S,I,ge,ye,Ie,fe,me,de,ue,he,ve,_e],encapsulation:2,changeDetection:0})};var Me=class i{data;dialog;constructor(){}ngOnInit(){}create(t){this.dialog.close(t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["ng-component"]],standalone:!0,features:[h],decls:1,vars:0,consts:[[3,"onSave"]],template:function(e,o){e&1&&(a(0,"dm-space-form",0),f("onSave",function(d){return o.create(d)}),s())},dependencies:[S,I,Oe],encapsulation:2,changeDetection:0})};function kt(i,t){if(i&1&&(a(0,"li")(1,"div",6)(2,"div")(3,"a",7),c(4),s(),a(5,"div",8),c(6),s()(),a(7,"div",9),c(8),g(9,"date"),s()()()),i&2){let e=t.$implicit;n(3),Je("routerLink","/spaces/",e.shortname,"/folder"),n(),F(e.displayname),n(2),ce("",e.shortname," ",e.description,""),n(2),P(" ",We(9,6,e.updated,"shortDate")," ")}}function Gt(i,t){if(i&1&&(a(0,"ul",5),Ue(1,kt,10,9,"li",null,qe),s()),i&2){m();let e=T(5);n(),He(e)}}var Ve=class i{constructor(t,e,o){this.spaceService=t;this.spaceListState=e;this.dialog=o}spaces$;ngOnInit(){this.spaces$=this.spaceListState.stateList$}create(){this.dialog.open(Me,{title:"New space",data:{},onclose:t=>{t&&this.spaceService.CreateSpace(t).subscribe({next:e=>{this.spaceListState.addItem(e)}})}})}static \u0275fac=function(e){return new(e||i)(l(re),l(ne),l(oe))};static \u0275cmp=v({type:i,selectors:[["ng-component"]],standalone:!0,features:[h],decls:8,vars:4,consts:[[1,"page"],[1,"container"],[1,"spaced"],[1,"btn-rev",3,"click"],["class","row-spaced uc-6 rowlist",4,"ngIf"],[1,"row-spaced","uc-6","rowlist"],[1,"card"],[1,"weight-bold",3,"routerLink"],[1,"smaller","light"],[1,"tail","smaller"]],template:function(e,o){if(e&1){let r=L();a(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),f("click",function(){return b(r),D(o.create())}),c(4,"Create new"),s()(),N(5),g(6,"async"),u(7,Gt,3,0,"ul",4),s()()}if(e&2){n(5);let r=U(y(6,1,o.spaces$));n(2),p("ngIf",r)}},dependencies:[S,G,O,K,I,ot],encapsulation:2,changeDetection:0})};var Zo=[{path:"",component:Ve},{component:Ne,path:":space",children:[{component:De,matcher:i=>i.length>0?{consumed:i,posParams:{type:i[0],path:new tt(i.slice(1).join("/"),{})}}:null}]}];export{Zo as SpaceRoutes};
